{"version":3,"sources":["webpack:///webpack/bootstrap 3c65a7c6d2205da16fc3","webpack:///./server/index.js","webpack:///external \"react\"","webpack:///./src/constants/actions.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"react-redux\"","webpack:///external \"react-router\"","webpack:///external \"redux\"","webpack:///./server/handlers/html.js","webpack:///./server/routes.js","webpack:///./server/utils.js","webpack:///./src/actions/init.js","webpack:///./src/components/App.js","webpack:///./src/containers/Root.js","webpack:///./src/lib/configureStore.js","webpack:///./src/lib/react.routes.js","webpack:///./src/reducers/index.js","webpack:///./src/reducers/init.js","webpack:///external \"boom\"","webpack:///external \"debug\"","webpack:///external \"good\"","webpack:///external \"hapi\"","webpack:///external \"hapi-react-views\"","webpack:///external \"inert\"","webpack:///external \"react-dom/server\"","webpack:///external \"redux-logger\"","webpack:///external \"redux-thunk\"","webpack:///external \"vision\""],"names":["ENV","process","env","NODE_ENV","server","Server","connection","host","port","PORT","routes","cors","plugins","register","options","ops","interval","reporters","console","module","name","args","log","request","response","error","startServer","done","errorRegister","views","engines","js","relativeTo","__dirname","path","compileOptions","renderMethod","route","start","info","uri","INIT_LOAD_FAIL","INIT_LOAD_START","INIT_LOAD_SUCCESS","defaultRenderOptions","runtimeOptions","docType","routedHtml","reply","assets","cssPath","cssFile","resolve","css","readFileSync","length","url","href","location","redirectLocation","renderProps","serverTimeout","redirect","pathname","search","temporary","initialState","statePath","stateFile","devtoolState","JSON","parse","index","currentStateIndex","computedStates","state","stateError","store","children","preloadedState","getState","htmlProps","title","render","errorLayout","output","notFound","method","handler","directory","lookupCompressed","file","getAssets","_getAssets","assetsFile","emptyAssets","vendor","bundle","Assets","loadStart","loadSuccess","loadFail","type","App","props","Root","dispatch","timeout","setTimeout","clearTimeout","mapStateToProps","init","configureStore","middleware","push","window","devToolsExtension","f","rootReducer","isLoading","loaded","action"],"mappings":"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","file":"build/server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3c65a7c6d2205da16fc3\n **/","// @flow\nimport Hapi from 'hapi'\nimport HapiReactViews from 'hapi-react-views'\nimport Good from 'good'\nimport Inert from 'inert'\nimport Vision from 'vision'\nimport Routes from './routes.js'\n\nconst ENV = process.env.NODE_ENV\n\nconst server = new Hapi.Server()\n\nserver.connection({\n  host: '0.0.0.0',\n  port: process.env.PORT || 8000,\n  routes: {\n    cors: true,\n  },\n})\n\n// Register Hapi plugins\nconst plugins = [\n  {\n    register: Inert,\n  },\n  {\n    register: Vision,\n  },\n  {\n    register: Good,\n    options: {\n      ops: {\n        interval: 5000,\n      },\n      reporters: {\n        console: [{\n          module: 'good-squeeze',\n          name: 'Squeeze',\n          args: [{ log: '*', request: '*', response: '*', error: '*' }],\n        }, {\n          module: 'good-console',\n        }, 'stdout'],\n      },\n    },\n  },\n]\n\n\nfunction startServer (done: ?Function): Object {\n\n  return server.register(plugins, (errorRegister: string): Object => {\n\n    if (errorRegister) return server.log(['error'], errorRegister)\n\n    server.views({\n      engines: {\n        js: HapiReactViews,\n      },\n      // relative to output file in build/ directory\n      relativeTo: __dirname,\n      // path: 'components',\n      path: 'views',\n      compileOptions: {\n        // layout: 'Html.js',\n        // layoutPath: Path.resolve(__dirname, 'layouts'),\n        renderMethod: 'renderToString',\n      },\n    })\n\n    server.route(Routes)\n\n    return server.start((): any => {\n\n      if (ENV) {\n\n        server.log(['info'], `NODE_ENV: ${ENV}`)\n\n      }\n      server.log(['info'], `Server running at: ${server.info.uri}`)\n\n      if (done) {\n\n        done()\n\n      }\n      return server\n\n    })\n\n  })\n\n}\n\nif (ENV === 'production') {\n\n  startServer()\n\n}\n\n\nexport default startServer\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/index.js\n **/","module.exports = require(\"react\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react\"\n ** module id = 1\n ** module chunks = 0 1\n **/","// @flow\nexport const INIT_LOAD_FAIL = 'INIT_LOAD_FAIL'\nexport const INIT_LOAD_START = 'INIT_LOAD_START'\nexport const INIT_LOAD_SUCCESS = 'INIT_LOAD_SUCCESS'\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants/actions.js\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"react-redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-redux\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"react-router\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-router\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"redux\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux\"\n ** module id = 7\n ** module chunks = 0\n **/","// @flow\nimport Boom from 'boom'\nimport Fs from 'fs'\nimport Path from 'path'\nimport React from 'react'\nimport { renderToString } from 'react-dom/server'\nimport { Provider } from 'react-redux'\nimport { match, RouterContext } from 'react-router'\nimport routes from '../../src/lib/react.routes.js'\nimport { getAssets } from '../utils.js'\nimport configureStore from '../../src/lib/configureStore.js'\n\n\n// Default render options for react templates\n// 'renderToStaticMarkup' omits react data properties\n// 'renderToString' is used for re-hydrating on client-side\nconst defaultRenderOptions = {\n  runtimeOptions: {\n    docType: '<!DOCTYPE html>',\n    renderMethod: 'renderToString',\n  },\n}\n\n\nconst routedHtml = (request: Object, reply: Function) => {\n\n  // Paths relative to inside build/ only in prod\n  const assets = getAssets()\n  let cssPath = './public/styles.css'\n  if (process.env.NODE_ENV === 'development') {\n\n    cssPath = '../../build/public/styles.css'\n\n  }\n  const cssFile = Path.resolve(__dirname, cssPath)\n  let css = ''\n\n  try {\n\n    css = Fs.readFileSync(cssFile, 'utf-8')\n    request.log(['info', 'css'], css.length)\n\n  }\n  catch (error) {\n\n    request.log(['error', 'css'], error)\n\n  }\n\n  request.log(['info'], request.url.href)\n\n  // Let react-router match the raw URL to generate the\n  // RouterContext here on the server\n  match({\n    routes,\n    location: request.url.href,\n  }, (error: string, redirectLocation: Object, renderProps: Object): any => {\n\n    if (error) {\n\n      request.log(['error', 'react-router'], error)\n      return reply(Boom.serverTimeout(error))\n\n    }\n    else if (redirectLocation) {\n\n      return reply\n        .redirect(redirectLocation.pathname + redirectLocation.search)\n        .temporary()\n\n    }\n    else if (renderProps) {\n\n      // Get initial store state\n      let initialState\n      if (process.env.NODE_ENV === 'development') {\n\n        const statePath = '../../state.json'\n        const stateFile = Path.resolve(__dirname, statePath)\n\n        try {\n\n          const devtoolState = JSON.parse(Fs.readFileSync(stateFile, 'utf-8'))\n          const index = devtoolState.currentStateIndex\n          initialState = devtoolState.computedStates[index].state\n          request.log(['info', 'state'], initialState)\n\n        }\n        catch (stateError) {\n\n          // This can fail silently if state.json doesn't exist\n          // request.log(['error', 'state'], stateError)\n\n        }\n\n      }\n      const store = configureStore(initialState)\n\n      // Get rendered router context\n      const children = renderToString(\n        <Provider store={store}>\n          <RouterContext {...renderProps} />\n        </Provider>\n      )\n\n      // Get resulting store state\n      const preloadedState = store.getState()\n\n      // Inject the RouterContext into the props sent to the layout\n      const htmlProps = {\n        assets,\n        children,\n        css,\n        preloadedState,\n        title: 'MyApp',\n      }\n\n      // Render the layout with props\n      return request.render(\n        'Html',\n        htmlProps,\n        defaultRenderOptions,\n        (errorLayout: string, output: string): any => {\n\n          if (errorLayout) {\n\n            request.log(['error', 'view'], errorLayout)\n            return reply(Boom.serverTimeout(errorLayout))\n\n          }\n\n          return reply(output)\n\n        }\n      )\n\n    }\n\n    // If react-router couldn't match anything and threw no error\n    return reply(Boom.notFound())\n\n  })\n\n}\n\n\nexport default routedHtml\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/handlers/html.js\n **/","// @flow\nimport htmlHandler from './handlers/html.js'\n\nexport default [\n  {\n    method: 'GET',\n    path: '/static/{param*}',\n    handler: {\n      directory: {\n        path: 'build/public',\n        lookupCompressed: true,\n      },\n    },\n  },\n  // Service workers and app cache\n  {\n    method: 'GET',\n    path: '/sw.js',\n    handler: {\n      file: 'build/public/sw.js',\n    },\n  },\n  {\n    method: 'GET',\n    path: '/appcache/{param*}',\n    handler: {\n      directory: {\n        path: 'build/public/appcache',\n      },\n    },\n  },\n  // Catch-all for react-router\n  {\n    method: 'GET',\n    path: '/{param*}',\n    handler: htmlHandler,\n  },\n]\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/routes.js\n **/","// @flow\n/* eslint-disable import/prefer-default-export */\nimport Debug from 'debug'\nimport Fs from 'fs'\nimport Path from 'path'\n\nconst log = Debug('my-app:server:utils')\n\nfunction _getAssets (): BuildAssets {\n\n  log('Reading assets.json from filesystem')\n  const assetsFile = Path.resolve(__dirname, '../build/assets.json')\n  try {\n\n    return JSON.parse(Fs.readFileSync(assetsFile, 'utf-8'))\n\n  }\n  catch (error) {\n\n    log('Error:', error)\n    const emptyAssets = {\n      vendor: {\n        js: '',\n      },\n      bundle: {\n        js: '',\n        css: '',\n      },\n    }\n    return emptyAssets\n\n  }\n\n}\n\n// Cached for production\nconst Assets = _getAssets()\n\n\n/**\n * Returns the parsed contents of assets.json\n *\n * @public\n * @returns {object} In development, reads and parses assets.json on every call.\n * In production, reads and parses assets.json on start-up and returns from\n * memory.\n */\nexport function getAssets (): BuildAssets {\n\n  if (process.env.NODE_ENV === 'production') {\n\n    return Assets\n\n  }\n\n  return _getAssets()\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./server/utils.js\n **/","// @flow\nimport {\n  INIT_LOAD_FAIL,\n  INIT_LOAD_START,\n  INIT_LOAD_SUCCESS,\n} from '../constants/actions.js'\n\n\nexport function loadStart (): InitAction {\n\n  return {\n    type: INIT_LOAD_START,\n  }\n\n}\n\nexport function loadSuccess (): InitAction {\n\n  return {\n    type: INIT_LOAD_SUCCESS,\n  }\n\n}\n\nexport function loadFail (): InitAction {\n\n  return {\n    type: INIT_LOAD_FAIL,\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/actions/init.js\n **/","// @flow\nimport React from 'react'\nimport Root from '../containers/Root.js'\n\n\nconst App = (props: { children: any }): Function => {\n\n  return (\n    <Root>\n      <div\n        className=\"pt7 tc\"\n      >\n        This is the app.\n        {props.children}\n      </div>\n    </Root>\n  )\n\n}\n\n\nexport default App\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/App.js\n **/","// @flow\nimport { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { loadSuccess } from '../actions/init.js'\n\ntype Props = {\n  children: any,\n  dispatch: Function,\n}\n\n\nclass Root extends Component {\n\n  componentDidMount () {\n\n    const { dispatch } = this.props\n    this.timeout = setTimeout(() => {\n\n      dispatch(loadSuccess())\n\n    }, 500)\n\n    // Can replace with API call checks in the future:\n    // {\n    //   loadedChannels: true,\n    //   loadedMessages: true,\n    // }\n\n  }\n\n  componentWillUnmount () {\n\n    clearTimeout(this.timeout)\n\n  }\n\n  props: Props\n  timeout: number\n\n  render (): ?React$Element<any> {\n\n    if (this.props.children) return this.props.children\n    return null\n\n  }\n\n}\n\n\nfunction mapStateToProps (state: GlobalReducerState): Object {\n\n  const { init } = state\n\n  return {\n    init,\n  }\n\n}\n\n\nexport default connect(mapStateToProps)(Root)\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/containers/Root.js\n **/","// @flow\n/* eslint-disable arrow-body-style */\n// import Debug from 'debug'\n// import { browserHistory } from 'react-router'\n// import { routerMiddleware } from 'react-router-redux'\nimport {\n  applyMiddleware,\n  createStore,\n  compose,\n} from 'redux'\nimport createLogger from 'redux-logger'\nimport thunk from 'redux-thunk'\nimport rootReducer from '../reducers/index.js'\n\n\nfunction configureStore (initialState: ?GlobalReducerState): Object {\n\n  // only log redux actions in development\n  const middleware = [\n    // routerMiddleware(browserHistory),\n    thunk,\n  ]\n\n  if (process.env.NODE_ENV === 'development') {\n\n    // logger needs to be last\n    middleware.push(createLogger())\n\n  }\n\n  const store = createStore(\n    rootReducer,\n    initialState,\n\n    compose(\n\n      applyMiddleware(...middleware),\n\n      // https://github.com/zalmoxisus/redux-devtools-extension\n      typeof window === 'object'\n        && typeof window.devToolsExtension !== 'undefined'\n        ? window.devToolsExtension()\n        : (f: void) => f\n\n    )\n  )\n\n  // Enable Webpack hot module replacement for reducers\n  // if (module.hot) {\n\n  //   log('Module is hot!')\n  //   module.hot.accept('../reducers', () => {\n\n  //     const nextRootReducer = rootReducer\n  //     store.replaceReducer(nextRootReducer)\n\n  //   })\n\n  // }\n\n  return store\n\n}\n\n\nexport default configureStore\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/configureStore.js\n **/","// @flow\nimport React from 'react'\nimport { Route } from 'react-router'\nimport App from '../components/App.js'\n// import Walkie from './components/Walkie.js'\n\nconst routes = (\n  <Route path=\"/\" component={App}>\n    {/*\n      <IndexRedirect to='/walkie' />\n      <Route path='walkie' component={Walkie} />\n    */}\n  </Route>\n)\n\nexport default routes\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/lib/react.routes.js\n **/","// @flow\nimport { combineReducers } from 'redux'\nimport init from './init.js'\n\nconst rootReducer = combineReducers({\n  init,\n})\n\nexport default rootReducer\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/index.js\n **/","// @flow\nimport {\n  INIT_LOAD_FAIL,\n  INIT_LOAD_START,\n  INIT_LOAD_SUCCESS,\n} from '../constants/actions.js'\n// import { Map } from 'immutable'\n// import Debug from 'debug'\n\n// const log = Debug('my-app')\n\n\nexport const initialState = {\n  isLoading: false,\n  loaded: false,\n}\n\n\nfunction init (\n  state: ?InitState = initialState,\n  action: InitAction\n): ?InitState {\n\n  // TODO: use global error reducer to catch all failure actions\n  // if (action.error) {\n\n  //   log('error:', action.error)\n\n  // }\n\n  switch (action.type) {\n\n\n    case INIT_LOAD_SUCCESS:\n      return Object.assign({}, state, {\n        isLoading: false,\n        loaded: true,\n      })\n\n    case INIT_LOAD_START:\n      return Object.assign({}, state, {\n        isLoading: true,\n        loaded: false,\n      })\n\n    case INIT_LOAD_FAIL:\n      return Object.assign({}, state, {\n        isLoading: false,\n        loaded: false,\n      })\n\n\n    default:\n      return state\n\n  }\n\n}\n\n\nexport default init\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/reducers/init.js\n **/","module.exports = require(\"boom\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"boom\"\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = require(\"debug\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"debug\"\n ** module id = 20\n ** module chunks = 0\n **/","module.exports = require(\"good\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"good\"\n ** module id = 21\n ** module chunks = 0\n **/","module.exports = require(\"hapi\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"hapi\"\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = require(\"hapi-react-views\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"hapi-react-views\"\n ** module id = 23\n ** module chunks = 0\n **/","module.exports = require(\"inert\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"inert\"\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = require(\"react-dom/server\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"react-dom/server\"\n ** module id = 25\n ** module chunks = 0\n **/","module.exports = require(\"redux-logger\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-logger\"\n ** module id = 26\n ** module chunks = 0\n **/","module.exports = require(\"redux-thunk\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"redux-thunk\"\n ** module id = 27\n ** module chunks = 0\n **/","module.exports = require(\"vision\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"vision\"\n ** module id = 28\n ** module chunks = 0\n **/"],"sourceRoot":""}